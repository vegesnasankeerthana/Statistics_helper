{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\veges\\\\OneDrive\\\\Documents\\\\GitHub\\\\statistics-helper\\\\frontend\\\\src\\\\components\\\\ExportImport.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExportImport = ({\n  schema\n}) => {\n  _s();\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    fetchEntries();\n  }, [schema.id]);\n  const fetchEntries = async () => {\n    try {\n      setLoading(true);\n      const response = await axios.get(`/api/schemas/${schema.id}/entries`);\n      setEntries(response.data);\n    } catch (error) {\n      console.error('Error fetching entries:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const exportToCSV = () => {\n    if (entries.length === 0) {\n      alert('No data to export');\n      return;\n    }\n    const fields = JSON.parse(schema.fields);\n    const csvHeaders = fields.map(f => f.name).join(',');\n    const csvRows = entries.map(entry => {\n      const data = JSON.parse(entry.data);\n      return fields.map(f => data[f.name] || '').join(',');\n    });\n    const csvContent = [csvHeaders, ...csvRows].join('\\n');\n    const blob = new Blob([csvContent], {\n      type: 'text/csv'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${schema.name}_export.csv`;\n    link.click();\n    window.URL.revokeObjectURL(url);\n  };\n  const exportToJSON = () => {\n    if (entries.length === 0) {\n      alert('No data to export');\n      return;\n    }\n    const exportData = {\n      schema: schema,\n      entries: entries.map(entry => ({\n        ...entry,\n        data: JSON.parse(entry.data)\n      }))\n    };\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = window.URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `${schema.name}_export.json`;\n    link.click();\n    window.URL.revokeObjectURL(url);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white shadow rounded-lg p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-gray-900 mb-6\",\n      children: [\"Export/Import - \", schema.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 mb-4\",\n          children: \"Export Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportToCSV,\n            disabled: loading || entries.length === 0,\n            className: \"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-300\",\n            children: \"Export as CSV\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: exportToJSON,\n            disabled: loading || entries.length === 0,\n            className: \"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:bg-gray-300\",\n            children: \"Export as JSON\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-sm text-gray-500\",\n          children: [\"Total entries: \", entries.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-medium text-gray-900 mb-4\",\n          children: \"Import Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-600 mb-4\",\n          children: \"Import functionality can be added here for CSV/JSON files\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \".csv,.json\",\n          className: \"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\",\n          disabled: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-1 text-xs text-gray-400\",\n          children: \"Import feature coming soon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n_s(ExportImport, \"4sTGUpvOCVQDVrjMhiZXOD4pK8w=\");\n_c = ExportImport;\nexport default ExportImport;\nvar _c;\n$RefreshReg$(_c, \"ExportImport\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","ExportImport","schema","_s","entries","setEntries","loading","setLoading","fetchEntries","id","response","get","data","error","console","exportToCSV","length","alert","fields","JSON","parse","csvHeaders","map","f","name","join","csvRows","entry","csvContent","blob","Blob","type","url","window","URL","createObjectURL","link","document","createElement","href","download","click","revokeObjectURL","exportToJSON","exportData","stringify","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","accept","_c","$RefreshReg$"],"sources":["C:/Users/veges/OneDrive/Documents/GitHub/statistics-helper/frontend/src/components/ExportImport.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface Schema {\r\n  id: number;\r\n  name: string;\r\n  fields: string;\r\n}\r\n\r\ninterface ExportImportProps {\r\n  schema: Schema;\r\n}\r\n\r\nconst ExportImport: React.FC<ExportImportProps> = ({ schema }) => {\r\n  const [entries, setEntries] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchEntries();\r\n  }, [schema.id]);\r\n\r\n  const fetchEntries = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await axios.get(`/api/schemas/${schema.id}/entries`);\r\n      setEntries(response.data);\r\n    } catch (error) {\r\n      console.error('Error fetching entries:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const exportToCSV = () => {\r\n    if (entries.length === 0) {\r\n      alert('No data to export');\r\n      return;\r\n    }\r\n\r\n    const fields = JSON.parse(schema.fields);\r\n    const csvHeaders = fields.map((f: any) => f.name).join(',');\r\n    \r\n    const csvRows = entries.map(entry => {\r\n      const data = JSON.parse(entry.data);\r\n      return fields.map((f: any) => data[f.name] || '').join(',');\r\n    });\r\n\r\n    const csvContent = [csvHeaders, ...csvRows].join('\\n');\r\n    \r\n    const blob = new Blob([csvContent], { type: 'text/csv' });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `${schema.name}_export.csv`;\r\n    link.click();\r\n    window.URL.revokeObjectURL(url);\r\n  };\r\n\r\n  const exportToJSON = () => {\r\n    if (entries.length === 0) {\r\n      alert('No data to export');\r\n      return;\r\n    }\r\n\r\n    const exportData = {\r\n      schema: schema,\r\n      entries: entries.map(entry => ({\r\n        ...entry,\r\n        data: JSON.parse(entry.data)\r\n      }))\r\n    };\r\n\r\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { \r\n      type: 'application/json' \r\n    });\r\n    const url = window.URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = `${schema.name}_export.json`;\r\n    link.click();\r\n    window.URL.revokeObjectURL(url);\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white shadow rounded-lg p-6\">\r\n      <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">\r\n        Export/Import - {schema.name}\r\n      </h2>\r\n      \r\n      <div className=\"space-y-6\">\r\n        <div>\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Export Data</h3>\r\n          <div className=\"flex space-x-4\">\r\n            <button\r\n              onClick={exportToCSV}\r\n              disabled={loading || entries.length === 0}\r\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:bg-gray-300\"\r\n            >\r\n              Export as CSV\r\n            </button>\r\n            <button\r\n              onClick={exportToJSON}\r\n              disabled={loading || entries.length === 0}\r\n              className=\"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 disabled:bg-gray-300\"\r\n            >\r\n              Export as JSON\r\n            </button>\r\n          </div>\r\n          <p className=\"mt-2 text-sm text-gray-500\">\r\n            Total entries: {entries.length}\r\n          </p>\r\n        </div>\r\n\r\n        <div>\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Import Data</h3>\r\n          <p className=\"text-sm text-gray-600 mb-4\">\r\n            Import functionality can be added here for CSV/JSON files\r\n          </p>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".csv,.json\"\r\n            className=\"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100\"\r\n            disabled\r\n          />\r\n          <p className=\"mt-1 text-xs text-gray-400\">Import feature coming soon</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExportImport;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}